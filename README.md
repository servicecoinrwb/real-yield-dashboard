Service Kernel Framework: Documentation
ðŸ§© 1. Overview
The Service Kernel Framework is a modular, DAO-controlled system built on Arbitrum for deploying capital and routing yield. It provides a robust architecture for DAOs to fund automated strategies (bots) or real-world entities (like contractors or businesses) and to collect and distribute the resulting profits in a secure and programmable way.

The framework is designed to bridge the gap between DeFi capital and real-world utility, enabling use cases like on-chain invoicing, seasonal working capital loans, and automated yield generation without the need for traditional overcollateralization.

ðŸ”§ 2. Core Concepts & Contracts
The framework consists of three primary smart contracts and one key role: the Solver.

Contracts
InvestorVaultV2 (0x1a...aa90)

Purpose: The capital pool. This is the entry point for outside users who wish to invest USDC into the system.

Functionality:

Accepts USDC deposits from investors.

Mints shares representing the investor's percentage of ownership in the vault.

Tracks and distributes claimable yield to shareholders.

KernelSmartAccountV2 (0xce...87f1)

Purpose: The operational brain. This DAO-owned contract manages the deployment and repayment of capital.

Functionality:

Maintains a whitelist of approved "Solver" addresses.

Disburses loans (capital) from its balance to whitelisted solvers.

Records loan repayments from solvers.

Forwards any profits (fees/interest) to the YieldVault.

YieldVault (0x44...432C)

Purpose: The profit center. This contract acts as a holding pen for all yield generated by the system.

Functionality:

Receives profits from the KernelSmartAccount.

Tracks the total fees accumulated over the contract's lifetime.

Allows the DAO to "sweep" the collected fees to the main DAO treasury.

Roles
The Solver

The "Solver" is any address whitelisted by the DAO to receive capital from the Kernel. This can be:

An automated trading bot executing an on-chain strategy.

The wallet address of a real-world contractor receiving a working capital loan.

Any other agent tasked with using the capital to generate a return.

ðŸ”„ 3. How It Works: A Step-by-Step Walkthrough
Here is the complete lifecycle of capital within the framework, from investment to profit distribution.

Step 1: Capital is Deposited
Action: An external Investor wants to participate. They connect to the system and deposit 10,000 USDC into the InvestorVault.

Result: The InvestorVault mints 10,000 shares and assigns them to the Investor's wallet. The vault now holds 10,000 USDC.

Step 2: DAO Funds the Kernel
Action: The DAO decides to put the investors' capital to work. The DAO owner calls the fundKernel function on the InvestorVault.

Result: The 10,000 USDC is transferred from the InvestorVault to the KernelSmartAccount. The Kernel is now capitalized and ready to deploy funds.

Step 3: DAO Whitelists and Disburses a Loan to a Solver
Action A (Whitelist): The DAO identifies a trusted contractor who needs a $5,000 loan. The DAO owner calls setSolverAddress on the KernelSmartAccount to add the contractor's wallet address to the whitelist.

Action B (Disburse): The DAO owner then calls disburseLoan, specifying the contractor's address and the 5,000 USDC amount.

Result: The KernelSmartAccount sends 5,000 USDC to the contractor's wallet. Its internal balance is now 5,000 USDC, and it has a record of the 5,000 USDC loan.

Step 4: Solver Repays the Loan with Interest
Action: The contractor completes their work and is ready to repay the loan plus a $500 fee.

The contractor first calls approve on the USDC contract, giving the KernelSmartAccount permission to pull 5,500 USDC from their wallet.

The contractor then calls recordLoanPrincipalRepayment for the 5000.00 principal amount and processSolverFees for the 500.00 profit amount.

Result:

The Kernel receives the 5,500 USDC.

It recognizes the 5,000 as the principal repayment and marks the loan as paid.

It forwards the 500 profit to the YieldVault.

Step 5: DAO Sweeps Fees and Investors Claim Yield
Action A (DAO): The DAO owner sees that the YieldVault now holds $500. They call sweepFullBalanceToTreasury.

Result A: The 500 USDC is transferred from the YieldVault to the main DAO treasury.

Action B (Investor): The InvestorVault is now aware that a profit was generated on its deployed capital. Our initial investor checks the dashboard and sees their "Claimable Yield" has increased. They call claimYield.

Result B: The investor receives their pro-rata portion of the yield directly in their wallet.

This completes the cycle, demonstrating how capital flows from investors, is deployed by the DAO, and returns profit to both the DAO and its investors.
